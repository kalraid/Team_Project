<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.medicine_inc.bbs.mapper.ChanhoMapper">
	<select id="SelectIllList" resultType="IllList" resultMap="IllResultMap">
		SELECT
		*
		FROM ill_list
		<where>
			<if test="Pas == 3">
				name between #{first} AND #{last}
			</if>
			<if test="Pas == 2">
				name like CONCAT(#{keyword}, '%')
			</if>
			<if test="Pas == 1">
				<if test="type =='name'">
				name like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='nameEn'">
				name_en like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='relatedDiseases'">
				related_diseases like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='symptom'">
				symptom like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='cause'">
				cause like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='diagnosis'">
				diagnosis like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='cure'">
				cure like CONCAT('%', #{keyword}, '%')
				</if>
			</if>
		</where>
		ORDER BY code
		LIMIT #{startRow}, #{PAGE_SIZE}
	</select>
	
	<select id="getBoardCount" parameterType="hashmap" resultType="int">
				
		SELECT 
			COUNT(code) 
		FROM ill_list
		<where>
			<if test="Pas == 3">
				name between #{first} AND #{last}
			</if>
			<if test="Pas == 2">
				name like CONCAT(#{keyword}, '%')
			</if>
			
			<if test="Pas == 1">
				<if test="type =='name'">
				name like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='nameEn'">
				name_en like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='relatedDiseases'">
				related_diseases like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='symptom'">
				symptom like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='cause'">
				cause like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='diagnosis'">
				diagnosis like CONCAT('%', #{keyword}, '%')
				</if>
				<if test="type =='cure'">
				cure like CONCAT('%', #{keyword}, '%')
				</if>
			</if>
			
		</where>
				ORDER BY code
		
		
					
	</select>

	<select id="selectOneIlllist" resultType="IllList" resultMap="IllResultMap">
			SELECT 
				*
				FROM ill_list
				where code = #{code}
	</select>


	<resultMap id="IllResultMap" type="IllList">
		<id property="code" column="code" />
		<result property="illClass" column="ill_class" />
		<result property="name" column="name" />
		<result property="nameEn" column="name_en" />
		<result property="relatedDiseases" column="related_diseases" />
		<result property="symptom" column="symptom" />
		<result property="cause" column="cause" />
		<result property="diagnosis" column="diagnosis" />
		<result property="cure" column="cure" />
	</resultMap>

</mapper>	